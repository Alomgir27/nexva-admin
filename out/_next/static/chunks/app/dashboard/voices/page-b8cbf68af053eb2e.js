(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{84827:function(e,t,r){Promise.resolve().then(r.bind(r,23919))},23919:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(57437),n=r(2265),l=r(99376),s=r(23488),o=r(24754),i=r(79159);let c=(0,r(8301).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var d=r(38208);let u=[{id:"female-1",name:"Heart",gender:"Female",accent:"Warm & Friendly"},{id:"female-2",name:"Nova",gender:"Female",accent:"Professional"},{id:"female-3",name:"Sarah",gender:"Female",accent:"Clear & Bright"},{id:"female-4",name:"Nicole",gender:"Female",accent:"Elegant"},{id:"female-5",name:"Sky",gender:"Female",accent:"Energetic"},{id:"male-1",name:"Adam",gender:"Male",accent:"Deep & Strong"},{id:"male-2",name:"Michael",gender:"Male",accent:"Clear & Calm"},{id:"male-3",name:"Bella",gender:"Female",accent:"Soft"},{id:"male-4",name:"Emma",gender:"Female",accent:"Sweet"},{id:"male-5",name:"Luna",gender:"Female",accent:"Gentle"}];function m(){var e;let t=(0,l.useRouter)(),[r,m]=(0,n.useState)([]),[x,b]=(0,n.useState)(null),[h,g]=(0,n.useState)("female-1"),[v,f]=(0,n.useState)(!0),[y,p]=(0,n.useState)(!1),[j,N]=(0,n.useState)(null),k=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(!localStorage.getItem("token")){t.push("/login");return}w()},[]);let w=async()=>{try{let e=localStorage.getItem("token"),t=await fetch("http://localhost:8000/api/chatbots",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();m(e),e.length>0&&(b(e[0].id),g(e[0].voice_id||"female-1"))}}catch(e){console.error("Error fetching chatbots:",e)}finally{f(!1)}},S=e=>{g(e)},C=async e=>{if(j===e){var t;null===(t=k.current)||void 0===t||t.pause(),N(null);return}try{N(e);let t=await fetch("http://localhost:8000/api/voice/generate-speech",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:"Hello, I'm your AI assistant. I'm here to help you with your questions.",voice_id:e})});if(t.ok){let e=await t.blob(),r=URL.createObjectURL(e);k.current&&k.current.pause(),k.current=new Audio(r),k.current.playbackRate=1.15,k.current.onended=()=>{N(null),URL.revokeObjectURL(r)},await k.current.play()}}catch(e){console.error("Error playing voice demo:",e),N(null)}},Z=async()=>{if(x){p(!0);try{let e=localStorage.getItem("token");if((await fetch("http://localhost:8000/api/chatbots/".concat(x,"/voice"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({voice_id:h})})).ok){let e=r.map(e=>e.id===x?{...e,voice_id:h}:e);m(e)}}catch(e){console.error("Error saving voice:",e)}finally{p(!1)}}},F=(null===(e=u.find(e=>e.id===h))||void 0===e?void 0:e.name)||"Heart";return v?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(s.Z,{className:"w-8 h-8 animate-spin text-[var(--text-text-subtle)]"})}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-[var(--text-text-default)]",children:"Voice Selection"}),(0,a.jsx)("p",{className:"text-[var(--text-text-subtle)] mt-1",children:"Choose from 10 high-quality Kokoro-82M voices (ultra-fast & efficient)"})]}),0===r.length?(0,a.jsxs)("div",{className:"bg-[var(--bg-bg-overlay-l1)] rounded-xl border border-[var(--border-border-neutral-l1)] p-12 text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-[var(--text-text-default)] mb-2",children:"No Chatbots Found"}),(0,a.jsx)("p",{className:"text-[var(--text-text-subtle)]",children:"Create a chatbot first to select a voice."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-[var(--bg-bg-overlay-l1)] rounded-xl border border-[var(--border-border-neutral-l1)] p-6 mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--text-text-default)] mb-2",children:"Select Chatbot"}),(0,a.jsx)("select",{value:x||"",onChange:e=>{let t=Number(e.target.value);b(t);let a=r.find(e=>e.id===t);a&&g(a.voice_id||"female-1")},className:"w-full px-4 py-2 bg-[var(--bg-bg-base-secondary)] border border-[var(--border-border-neutral-l1)] rounded-lg text-[var(--text-text-default)] focus:outline-none focus:border-[var(--bg-bg-brand)]",children:r.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{className:"bg-[var(--bg-bg-overlay-l1)] rounded-xl border border-[var(--border-border-neutral-l1)] overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-[var(--border-border-neutral-l1)]",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-[var(--text-text-default)]",children:"Available Voices"}),(0,a.jsxs)("p",{className:"text-sm text-[var(--text-text-subtle)] mt-1",children:["Selected: ",F]})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(e=>(0,a.jsxs)("div",{onClick:()=>S(e.id),className:"relative p-4 rounded-lg border-2 cursor-pointer transition-all ".concat(h===e.id?"border-[var(--bg-bg-brand)] bg-[var(--bg-bg-brand)]/10":"border-[var(--border-border-neutral-l1)] hover:border-[var(--border-border-neutral-l2)]"),children:[h===e.id&&(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)(o.Z,{className:"w-5 h-5 text-[var(--bg-bg-brand)]"})}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(h===e.id?"bg-[var(--bg-bg-brand)] text-white":"bg-[var(--bg-bg-base-secondary)] text-[var(--text-text-subtle)]"),children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-[var(--text-text-default)]",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-[var(--text-text-subtle)]",children:e.gender})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs mt-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded bg-[var(--bg-bg-base-secondary)] text-[var(--text-text-subtle)]",children:e.accent}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),C(e.id)},className:"p-2 rounded-lg hover:bg-[var(--bg-bg-base-secondary)] text-[var(--text-text-default)] transition-colors",children:j===e.id?(0,a.jsx)(c,{className:"w-4 h-4"}):(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]})]},e.id))})}),(0,a.jsx)("div",{className:"p-6 border-t border-[var(--border-border-neutral-l1)] flex justify-end",children:(0,a.jsx)("button",{onClick:Z,disabled:y||!x,className:"px-6 py-2 bg-[var(--bg-bg-brand)] text-white rounded-lg hover:bg-[var(--bg-bg-brand-hover)] disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Save Voice Selection"]})})})]})]})]})}},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},8301:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var s=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{color:o="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:d,children:u,...m}=r;return(0,a.createElement)("svg",{ref:s,...n,width:i,height:i,stroke:o,strokeWidth:d?24*Number(c)/Number(i):c,className:"lucide lucide-".concat(l(e)),...m},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...(Array.isArray(u)?u:[u])||[]])});return r.displayName="".concat(e),r}},24754:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8301).Z)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])},23488:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8301).Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},38208:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8301).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},79159:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8301).Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]])}},function(e){e.O(0,[971,117,744],function(){return e(e.s=84827)}),_N_E=e.O()}]);