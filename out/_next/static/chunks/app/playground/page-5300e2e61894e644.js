(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{87693:function(e,t,r){Promise.resolve().then(r.bind(r,20098))},20098:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var a=r(57437),s=r(2265),n=r(36339),l=r(66754),o=r(79159),c=r(55972),i=r(67608),d=r(23488),u=r(80498),x=r(27648),b=r(33145),m=r(40236),g=r(85561),h=r(86574),v=r(12658);function p(){let[e,t]=(0,s.useState)("text"),[r,p]=(0,s.useState)(""),[y,f]=(0,s.useState)(""),[j,N]=(0,s.useState)([]),[w,S]=(0,s.useState)(!1),[k,R]=(0,s.useState)(!1),[C,D]=(0,s.useState)(!1),[T,E]=(0,s.useState)(null),_=(0,s.useRef)(null),A=(0,s.useRef)(null),O=(0,s.useRef)(null),U=(0,s.useRef)(null),[P,Z]=(0,s.useState)(!1),[L,q]=(0,s.useState)(""),[I,F]=(0,s.useState)(""),[z,J]=(0,s.useState)([]),[V,W]=(0,s.useState)(!1),[B,K]=(0,s.useState)(!1),M=(0,s.useRef)(null),G=(0,s.useRef)(null),[H,$]=(0,s.useState)("low"),Q=(0,s.useRef)([]),X=(0,s.useRef)(!1),Y=(0,s.useRef)(!1),ee=(0,s.useRef)(0),et=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("nexva_api_key");e&&p(e)},[]),(0,s.useEffect)(()=>{var e;null===(e=A.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[j]),(0,s.useEffect)(()=>{var e;null===(e=O.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[z]),(0,s.useEffect)(()=>()=>{if(U.current&&U.current.recognition)try{U.current.recognition.stop()}catch(e){}M.current&&M.current.close()},[]);let er=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new(window.AudioContext||window.webkitAudioContext),r=t.createAnalyser(),a=t.createMediaStreamSource(e);r.smoothingTimeConstant=.8,r.fftSize=512,a.connect(r),M.current=t,G.current=r;let s=r.frequencyBinCount,n=new Uint8Array(s),l=()=>{G.current&&(r.getByteFrequencyData(n),n.reduce((e,t)=>e+t)/s<20?$("low"):$("good"),M.current&&requestAnimationFrame(l))};return l(),e}catch(e){return console.error("Audio monitoring error:",e),null}},ea=()=>{M.current&&(M.current.close(),M.current=null),G.current&&(G.current=null),$("low")},es=()=>{if(0===Q.current.length){X.current=!1,setTimeout(()=>{Y.current=!1},200);return}X.current=!0,Y.current=!0;let e=Q.current.shift(),t=e.audio,r=e.url;t.onended=()=>{URL.revokeObjectURL(r),es()},t.onerror=()=>{URL.revokeObjectURL(r),es()},t.play().catch(e=>{console.error("Audio play failed:",e),URL.revokeObjectURL(r),es()})},en=e=>{let t=URL.createObjectURL(e),r=new Audio(t);Q.current.push({audio:r,url:t}),X.current||es()},el=async()=>{try{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){alert("Speech recognition not supported in this browser. Please use Chrome or Edge.");return}await er();let t=new e;t.continuous=!0,t.interimResults=!0,t.lang="en-US";let r="",a=null,s=-1;t.onstart=()=>{Z(!0),q(""),N(e=>{let t=[...e,{role:"user",content:""}];return s=t.length-1,t})},t.onresult=e=>{let n="";for(let t=e.resultIndex;t<e.results.length;t++){let a=e.results[t][0].transcript;e.results[t].isFinal?r+=(r?" ":"")+a:n+=a}let l=r+(n?" "+n:"");N(e=>e.map((e,t)=>t===s?{...e,content:l}:e)),a&&clearTimeout(a),(r+(n?" "+n:"")).trim()&&(a=setTimeout(()=>{let e=(r+(n?" "+n:"")).trim();e&&(t.stop(),Z(!1),ea(),ec(e,{reuseIndex:s}),r="",s=-1)},2e3))},t.onerror=e=>{console.error("Speech recognition error:",e.error),"no-speech"!==e.error&&"aborted"!==e.error&&(N(e=>e.filter((e,t)=>t!==s)),alert("Recognition error: ".concat(e.error))),Z(!1),ea()},t.onend=()=>{a&&clearTimeout(a),r.trim()||-1===s||N(e=>e.filter((e,t)=>t!==s)),Z(!1),q(""),ea()},U.current={recognition:t},t.start()}catch(e){alert("Speech recognition failed. Please check browser compatibility."),Z(!1),ea()}},eo=()=>{if(U.current&&U.current.recognition)try{U.current.recognition.stop(),U.current=null}catch(e){console.log("Recognition stop error:",e)}Z(!1),q(""),ea()},ec=async(e,t)=>{var a;let s=(null!=e?e:y).trim();if(!s||w)return;let n=null!==(a=null==t?void 0:t.reuseIndex)&&void 0!==a?a:-1;n>=0?N(e=>e.map((e,t)=>t===n?{...e,content:s}:e)):N(e=>[...e,{role:"user",content:s}]),f(""),S(!0);try{let e=new WebSocket("ws://localhost:8000/ws/chat/".concat(r)),t="",a=-1;e.onopen=()=>{e.send(JSON.stringify({message:s,session_id:"playground-session"}))},e.onmessage=r=>{let s=JSON.parse(r.data);if("chunk"===s.type){if(t+=s.text,-1===a)N(e=>{let r=[...e,{role:"assistant",content:t}];return a=r.length-1,r});else{let e=a;N(r=>r.map((r,a)=>a===e?{...r,content:t}:r))}}else"complete"===s.type&&(S(!1),s.conversation_id&&E(s.conversation_id),e.close())},e.onerror=()=>{N(e=>[...e,{role:"system",content:"❌ Connection error. Make sure backend is running."}]),S(!1)},e.onclose=()=>{S(!1)}}catch(e){N(t=>[...t,{role:"system",content:"❌ Error: ".concat(e)}]),S(!1)}},ei=async()=>{if(k){ed();return}try{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){J(e=>[...e,"❌ Speech recognition not supported in this browser. Please use Chrome or Edge."]);return}await er();let t=new e;t.continuous=!0,t.interimResults=!0,t.lang="en-US",U.current={recognition:t};let a=new WebSocket("ws://localhost:8000/ws/voice-chat/".concat(r));_.current=a;let s="",n=!1;t.onstart=()=>{R(!0),console.log("\uD83C\uDFA4 START")},t.onresult=e=>{if(Y.current||n)return;let t="";for(let r=0;r<e.results.length;r++)e.results[r].isFinal&&(t+=e.results[r][0].transcript+" ");s=t.trim(),F(s),et.current&&clearTimeout(et.current),s&&(et.current=setTimeout(()=>{s&&!n&&a.readyState===WebSocket.OPEN&&(n=!0,console.log("\uD83D\uDCE4 SEND:",s),a.send(JSON.stringify({type:"text_query",text:s})))},3e3))},t.onerror=e=>{if(console.error("Speech recognition error:",e.error),"no-speech"!==e.error&&"aborted"!==e.error){if("network"===e.error){console.error("Network error - will retry");return}console.log("Recognition error, attempting recovery...")}},t.onend=()=>{if(k&&U.current&&!Y.current){let e=Date.now();e-ee.current>300&&(ee.current=e,setTimeout(()=>{if(U.current&&k)try{t.start()}catch(e){setTimeout(()=>{if(U.current&&k)try{t.start()}catch(e){console.error("Recognition restart failed:",e)}},500)}},100))}},a.onopen=()=>{t.start()},a.onmessage=e=>{let t=JSON.parse(e.data);if("response_start"===t.type)console.log("\uD83D\uDCDD START"),J(e=>[...e,""]);else if("text_chunk"===t.type)J(e=>{if(0===e.length)return[t.text];let r=[...e];return r[r.length-1]+=t.text,r});else if("audio_chunk"===t.type){let e=new Blob([Uint8Array.from(atob(t.audio),e=>e.charCodeAt(0))],{type:"audio/wav"});en(e)}else"response_end"===t.type?(console.log("✅ DONE"),s="",n=!1,F("")):"error"===t.type&&J(e=>[...e,"❌ ".concat(t.message)])},a.onerror=()=>{J(e=>[...e,"❌ Connection error"]),ed()},a.onclose=()=>{et.current&&clearTimeout(et.current)}}catch(e){console.error("Error starting voice chat:",e),J(e=>[...e,"❌ Failed to start voice chat"])}},ed=()=>{if(U.current&&U.current.recognition)try{U.current.recognition.stop(),U.current=null}catch(e){console.log("Recognition stop error:",e)}_.current&&_.current.readyState===WebSocket.OPEN&&(_.current.send(JSON.stringify({type:"stop"})),_.current.close()),Q.current.forEach(e=>{let{audio:t,url:r}=e;t.pause(),URL.revokeObjectURL(r)}),Q.current=[],X.current=!1,Y.current=!1,R(!1),ea()},eu=()=>{N([]),J([]),F(""),D(!1),E(null),W(!1)},ex=async()=>{if(!T){alert("No active conversation to request support for");return}try{let e=await fetch("http://localhost:8000/api/conversations/".concat(T,"/request-support"),{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok)D(!0),N(e=>[...e,{role:"system",content:"✅ Support requested! A team member will assist you shortly."}]);else{let t=await e.json();alert(t.detail||"Failed to request support")}}catch(e){alert("Failed to request support")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-[var(--bg-bg-base-default)]",children:[(0,a.jsx)("nav",{className:"border-b border-[var(--border-border-neutral-l1)] bg-[var(--bg-bg-base-secondary)]",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(b.default,{src:"/images/img.png",alt:"Nexva",width:32,height:32,className:"rounded-lg"}),(0,a.jsx)("span",{className:"text-xl font-semibold text-[var(--text-text-default)]",children:"Nexva"})]}),(0,a.jsx)("span",{className:"text-[var(--text-text-tertiary)]",children:"/"}),(0,a.jsx)("span",{className:"text-[var(--text-text-secondary)]",children:"Playground"})]}),(0,a.jsx)(x.default,{href:"/dashboard",className:"px-4 py-2 bg-[var(--bg-bg-overlay-l2)] text-[var(--text-text-default)] rounded-lg hover:bg-[var(--bg-bg-overlay-l3)] transition-all",children:"Dashboard"})]})}),(0,a.jsxs)("main",{className:"max-w-5xl mx-auto px-6 py-12",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold text-[var(--text-text-default)] mb-2",children:"Playground"}),(0,a.jsx)("p",{className:"text-[var(--text-text-secondary)]",children:"Test your chatbot with text or voice"})]}),(0,a.jsxs)("div",{className:"bg-[var(--bg-bg-overlay-l1)] rounded-xl border border-[var(--border-border-neutral-l1)] p-6 mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--text-text-default)] mb-2",children:"API Key"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:r,onChange:e=>p(e.target.value),placeholder:"Enter your API key",className:"flex-1 px-4 py-2 bg-[var(--bg-bg-base-secondary)] border border-[var(--border-border-neutral-l1)] rounded-lg text-[var(--text-text-default)] font-mono text-sm focus:outline-none focus:border-[var(--bg-bg-brand)]"}),(0,a.jsxs)("button",{onClick:()=>{localStorage.setItem("nexva_api_key",r),alert("API Key saved locally!")},disabled:!r.trim(),className:"flex items-center space-x-2 px-4 py-2 bg-[var(--bg-bg-brand)] text-[var(--text-text-onbrand)] rounded-lg hover:bg-[var(--bg-bg-brand-hover)] disabled:opacity-50 transition-all",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Save"})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2 mb-6",children:[(0,a.jsxs)("button",{onClick:()=>t("text"),className:"flex items-center space-x-2 px-6 py-3 rounded-lg transition-all ".concat("text"===e?"bg-[var(--bg-bg-brand)] text-[var(--text-text-onbrand)]":"bg-[var(--bg-bg-overlay-l1)] text-[var(--text-text-secondary)] hover:bg-[var(--bg-bg-overlay-l2)]"),children:[(0,a.jsx)(l.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Text Chat"})]}),(0,a.jsxs)("button",{onClick:()=>t("voice"),className:"flex items-center space-x-2 px-6 py-3 rounded-lg transition-all ".concat("voice"===e?"bg-[var(--bg-bg-brand)] text-[var(--text-text-onbrand)]":"bg-[var(--bg-bg-overlay-l1)] text-[var(--text-text-secondary)] hover:bg-[var(--bg-bg-overlay-l2)]"),children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Voice Chat"})]})]}),"text"===e?(0,a.jsxs)("div",{className:"bg-[var(--bg-bg-overlay-l1)] rounded-xl border border-[var(--border-border-neutral-l1)] p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-[var(--text-text-default)]",children:"Text Chat"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[!C&&j.length>0&&(0,a.jsxs)("button",{onClick:ex,className:"flex items-center space-x-2 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 rounded-lg text-sm text-white transition-all",children:[(0,a.jsx)(l.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Talk to Human"})]}),(0,a.jsxs)("button",{onClick:eu,className:"flex items-center space-x-2 px-3 py-1.5 bg-[var(--bg-bg-overlay-l2)] hover:bg-[var(--bg-bg-overlay-l3)] rounded-lg text-sm text-[var(--text-text-secondary)] transition-all",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Clear"})]})]})]}),(0,a.jsx)("div",{className:"bg-[var(--bg-bg-base-secondary)] rounded-lg p-4 mb-4 h-96 overflow-y-auto",children:0===j.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-[var(--text-text-tertiary)]",children:(0,a.jsx)("p",{children:"No messages yet. Start chatting!"})}):(0,a.jsxs)("div",{className:"space-y-3",children:[j.filter(e=>""!==e.content.trim()||"user"===e.role).map((e,t)=>(0,a.jsxs)("div",{className:"p-3 rounded-lg ".concat("user"===e.role?"bg-[var(--bg-bg-brand)] text-[var(--text-text-onbrand)] ml-12":"assistant"===e.role?"bg-[var(--bg-bg-overlay-l2)] text-[var(--text-text-default)] mr-12":"bg-[var(--bg-bg-overlay-l1)] text-[var(--text-text-secondary)]"),children:[(0,a.jsx)("div",{className:"text-xs font-medium mb-1 opacity-70",children:e.role}),""===e.content.trim()&&"user"===e.role?(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}):(0,a.jsx)("div",{className:"text-sm max-w-none ".concat("assistant"===e.role?"prose prose-invert":""),children:"assistant"===e.role?(0,a.jsx)(m.UG,{remarkPlugins:[g.Z],components:{code(e){let{node:t,inline:r,className:s,children:n,...l}=e,o=/language-(\w+)/.exec(s||"");return!r&&o?(0,a.jsx)(h.Z,{style:v.Z,language:o[1],PreTag:"div",className:"rounded-lg my-2",...l,children:String(n).replace(/\n$/,"")}):(0,a.jsx)("code",{className:"bg-[var(--bg-bg-base-secondary)] px-1.5 py-0.5 rounded text-xs font-mono",...l,children:n})},a(e){let{node:t,children:r,href:s,...n}=e;return(0,a.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--bg-bg-brand)] hover:underline hover:text-[var(--bg-bg-brand-hover)] transition-colors",...n,children:r})},p(e){let{node:t,children:r,...s}=e;return(0,a.jsx)("p",{className:"my-2 leading-relaxed",...s,children:r})},ul(e){let{node:t,children:r,...s}=e;return(0,a.jsx)("ul",{className:"my-2 ml-4 list-disc space-y-1",...s,children:r})},ol(e){let{node:t,children:r,...s}=e;return(0,a.jsx)("ol",{className:"my-2 ml-4 list-decimal space-y-1",...s,children:r})},li(e){let{node:t,children:r,...s}=e;return(0,a.jsx)("li",{className:"leading-relaxed",...s,children:r})},h1(e){let{node:t,children:r,...s}=e;return(0,a.jsx)("h1",{className:"text-xl font-semibold mt-4 mb-2",...s,children:r})},h2(e){let{node:t,children:r,...s}=e;return(0,a.jsx)("h2",{className:"text-lg font-semibold mt-3 mb-2",...s,children:r})},h3(e){let{node:t,children:r,...s}=e;return(0,a.jsx)("h3",{className:"text-base font-semibold mt-2 mb-1",...s,children:r})},blockquote(e){let{node:t,children:r,...s}=e;return(0,a.jsx)("blockquote",{className:"border-l-3 border-[var(--bg-bg-brand)] pl-4 italic my-3 text-[var(--text-text-secondary)]",...s,children:r})},strong(e){let{node:t,children:r,...s}=e;return(0,a.jsx)("strong",{className:"font-semibold text-[var(--text-text-default)]",...s,children:r})}},children:e.content}):(0,a.jsx)("p",{className:"leading-relaxed whitespace-pre-wrap break-words",children:e.content})})]},t)),w&&j.length>0&&"assistant"!==j[j.length-1].role&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-[var(--bg-bg-overlay-l2)] text-[var(--text-text-default)] mr-12",children:[(0,a.jsx)("div",{className:"text-xs font-medium mb-1 opacity-70",children:"assistant"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-[var(--text-text-tertiary)] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-[var(--text-text-tertiary)] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-[var(--text-text-tertiary)] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),(0,a.jsx)("div",{ref:A})]})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:y+(L?" "+L:""),onChange:e=>f(e.target.value),onKeyPress:e=>"Enter"===e.key&&!w&&ec(),placeholder:"Type your message or use voice...",className:"flex-1 px-4 py-3 bg-[var(--bg-bg-base-secondary)] border border-[var(--border-border-neutral-l1)] rounded-lg text-[var(--text-text-default)] focus:outline-none focus:border-[var(--bg-bg-brand)]",disabled:P}),(0,a.jsxs)("button",{onClick:()=>P?eo():el(),className:"relative px-4 py-3 rounded-lg transition-all flex items-center justify-center ".concat(P?"low"===H?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-red-500 hover:bg-red-600 text-white":"bg-[var(--bg-bg-overlay-l2)] hover:bg-[var(--bg-bg-overlay-l3)] text-[var(--text-text-default)]"),children:[P&&(0,a.jsxs)("span",{className:"absolute inset-0 rounded-lg",children:[(0,a.jsx)("span",{className:"absolute inset-0 rounded-lg ".concat("low"===H?"bg-yellow-400":"bg-red-400"," opacity-75 animate-ping")}),(0,a.jsx)("span",{className:"absolute inset-0 rounded-lg ".concat("low"===H?"bg-yellow-400":"bg-red-400"," opacity-50"),style:{animation:"pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})]}),(0,a.jsx)("span",{className:"relative z-10",children:(0,a.jsx)(i.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("button",{id:"send-button",onClick:()=>ec(),disabled:w||!y.trim(),className:"px-6 py-3 bg-[var(--bg-bg-brand)] text-[var(--text-text-onbrand)] rounded-lg hover:bg-[var(--bg-bg-brand-hover)] disabled:opacity-50 transition-all flex items-center space-x-2",children:[w?(0,a.jsx)(d.Z,{className:"h-5 w-5 animate-spin"}):(0,a.jsx)(u.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:w?"Sending...":"Send"})]})]})]}):(0,a.jsxs)("div",{className:"bg-[var(--bg-bg-overlay-l1)] rounded-xl border border-[var(--border-border-neutral-l1)] p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-[var(--text-text-default)]",children:"Voice Chat"}),(0,a.jsxs)("button",{onClick:eu,className:"flex items-center space-x-2 px-3 py-1.5 bg-[var(--bg-bg-overlay-l2)] hover:bg-[var(--bg-bg-overlay-l3)] rounded-lg text-sm text-[var(--text-text-secondary)] transition-all",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Clear"})]})]}),(0,a.jsxs)("div",{className:"bg-[var(--bg-bg-base-secondary)] rounded-lg p-4 mb-4 h-96 overflow-y-auto",children:[z.length>0&&(0,a.jsx)("div",{className:"space-y-6 mb-6",children:z.map((e,t)=>(0,a.jsxs)("div",{children:[t>0&&(0,a.jsx)("div",{className:"border-t-2 border-[var(--border-border-neutral-l1)] mb-6"}),(0,a.jsxs)("div",{className:"space-y-2 bg-[var(--bg-bg-overlay-l1)] p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-xs font-medium text-[var(--text-text-secondary)]",children:["assistant • Response ",t+1]}),(0,a.jsx)("div",{className:"text-sm text-[var(--text-text-default)] whitespace-pre-wrap",children:e})]})]},t))}),V&&(0,a.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-[var(--text-text-secondary)]",children:"assistant"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-[var(--text-text-secondary)] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-[var(--text-text-secondary)] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-[var(--text-text-secondary)] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),!I&&0===z.length&&!V&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,a.jsx)("p",{className:"text-lg font-medium text-[var(--text-text-default)] mb-2",children:k?"Listening...":"Click microphone below to start"}),(0,a.jsx)("p",{className:"text-sm text-[var(--text-text-tertiary)]",children:"Real-time speech recognition"})]}),(0,a.jsx)("div",{ref:O})]}),I&&(0,a.jsx)("div",{className:"mb-4 flex justify-center",children:(0,a.jsx)("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl px-4 py-3 shadow-lg max-w-md",children:(0,a.jsx)("p",{className:"text-sm text-[var(--text-text-default)] whitespace-pre-wrap leading-relaxed",children:I})})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("button",{onClick:k?ed:ei,className:"relative w-20 h-20 rounded-full flex items-center justify-center transition-all shadow-lg ".concat(k?"low"===H?"bg-yellow-500 hover:bg-yellow-600":"bg-red-500 hover:bg-red-600":"bg-[var(--bg-bg-brand)] hover:bg-[var(--bg-bg-brand-hover)]"),children:[k&&(0,a.jsxs)("span",{className:"absolute inset-0 rounded-full",children:[(0,a.jsx)("span",{className:"absolute inset-0 rounded-full ".concat("low"===H?"bg-yellow-400":"bg-red-400"," opacity-75 animate-ping")}),(0,a.jsx)("span",{className:"absolute inset-0 rounded-full ".concat("low"===H?"bg-yellow-400":"bg-red-400"," opacity-50"),style:{animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})]}),(0,a.jsx)("span",{className:"relative z-10",children:(0,a.jsx)(i.Z,{className:"h-10 w-10 text-[var(--text-text-onbrand)]"})})]})}),(0,a.jsx)("div",{className:"mt-4 p-4 bg-[var(--bg-bg-base-secondary)] rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-[var(--text-text-tertiary)]",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(k?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,a.jsx)("p",{className:"text-center",children:k?Y.current?"AI speaking":"Listening":"Click mic to start"})]})})]})]})]})}}},function(e){e.O(0,[589,145,885,971,117,744],function(){return e(e.s=87693)}),_N_E=e.O()}]);